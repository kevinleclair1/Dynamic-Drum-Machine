var app={};app.url="http://www.freesound.org/apiv2/search/text/",app.key=function(){var a=["a94e300dd630214779394cd94467955649cc5b2d","6456665a0533915b9d76966a56945892a0a723b6","718559268c3e6ab18aae2bde65af810177e7adf2"],e=Math.floor(Math.random()*a.length);return a[e]},app.init=function(){$(".searchForm").on("submit",function(a){a.preventDefault();var e=$(".searchWord").val();console.log(e),app.getResults(e)}),$(".grid").on("click",".pad",function(){console.log("clicked");var a=$(this).find(".sample")[0];a.currentTime=0,a.play(),console.log("sound played"),$(this).addClass("animated pulse").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("animated pulse"),console.log("we removed the class")})}),$(window).on("keydown",function(a){if(!$(".onoffswitch-checkbox").is(":checked"))return void console.log("It's not checked, so don't play any sound");var e=[81,87,69,82,84,89,65,83,68,70,71,72],n=e.indexOf(a.keyCode);if(-1!=n){var o=$(".pad").eq(n),t=$(".pad").eq(n).find("audio")[0];t.currentTime=0,t.play(),console.log("sound played"),o.addClass("animated pulse").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){o.removeClass("animated pulse"),console.log("we removed the class")})}}),$(".stop").on("click",function(){var a=$(".sample");a.trigger("pause")})},app.getResults=function(a){$(".overlay").fadeIn(600);var e=$(".minLength").val(),n=$(".maxLength").val(),o={query:a,page_size:"150",token:app.key,filter:"tag:"+a};e&&n&&(o.filter="duration:["+e+" TO "+n+"] tag:"+a),$.ajax({url:app.url,type:"GET",dataType:"json",data:o,success:function(a){console.log(a);for(var e=a.results,n=[],o=0;12>o;o++){var t=app.randomNumber(e),i=e[t].id;console.log(i),n.push(i)}$(".grid").empty();for(var o=0;o<n.length;o++){var s=n[o];app.getSounds(s)}$("html, body").animate({scrollTop:$(".onoffswitch").offset().top},1500),$(".overlay").fadeOut(1e3)}})},app.randomNumber=function(a){var e=Math.floor(Math.random()*a.length);return e},app.getSounds=function(a){var e="http://www.freesound.org/apiv2/sounds/"+a+"/";$.ajax({url:e,type:"GET",data:{token:app.key},dataType:"json",success:function(a){console.log(a);var e=a.url,n=a.previews["preview-hq-mp3"],o=a.previews["preview-hq-ogg"],t=$("<a>").addClass("sampleUrl").html('<i class="fa fa-link"></i>').attr({href:e,target:"_blank"}),i=$("<div>").addClass("pad"),s=$("<audio>").addClass("sample").attr("src",n);i.append(s,t),$(".grid").append(i)}})},$(function(){var a=$(".howTo");$(".howToToggle").on("click",function(){a.slideToggle()}),$(".fa-times-circle").on("click",function(){a.slideToggle()}),app.init()});